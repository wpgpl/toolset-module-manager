!function(a,b,c){function d(a,b,c){return a="object"!=typeof userSettings?{}:f.getHash(a+"-"+userSettings.uid)||{},a.hasOwnProperty(b)?a[b]:void 0!==c?c:""}function e(a,b,c,d){if("object"!=typeof userSettings)return!1;var e=a+"-time-"+userSettings.uid,a=a+"-"+userSettings.uid,g=f.getHash(a)||{},h=userSettings.url,i=b.toString().replace(/[^A-Za-z0-9_]/,""),c=c.toString().replace(/[^A-Za-z0-9_]/,"");return d?delete g[i]:g[i]=c,f.setHash(a,g,31536e3,h),f.set(e,userSettings.time,31536e3,h),b}b.fn.slideFadeDown=function(a,c,d){return this.each(function(){b(this).stop(!0).animate({opacity:"show",height:"show"},a,c||"linear",function(){b.browser&&b.browser.msie&&this.style.removeAttribute("filter"),b.isFunction(d)&&d.call(this)})})},b.fn.slideFadeUp=function(a,c,d){return this.each(function(){b(this).is(":hidden")?b(this).hide():b(this).stop(!0).animate({opacity:"hide",height:"hide"},a,c||"linear",function(){b.browser&&b.browser.msie&&this.style.removeAttribute("filter"),b.isFunction(d)&&d.call(this)})})},b.extend({ModManfileDownload:function(c,d){function e(){if(-1!=document.cookie.indexOf(j.cookieName+"="+j.cookieValue))o.onSuccess(c),document.cookie=j.cookieName+"=; expires="+new Date(1e3).toUTCString()+"; path="+j.cookiePath,g(!1);else{if(q||p)try{var a;if((a=q?q.document:f(p))&&null!=a.body&&a.body.innerHTML.length>0){var d=!0;if(r&&r.length>0){var h=b(a.body).contents().first();h.length>0&&h[0]===r[0]&&(d=!1)}if(d)return o.onFail(a.body.innerHTML,c),void g(!0)}}catch(a){return o.onFail("",c),void g(!0)}setTimeout(e,j.checkInterval)}}function f(a){return a=a[0].contentWindow||a[0].contentDocument,a.document&&(a=a.document),a}function g(a){setTimeout(function(){q&&(m&&q.close(),l&&(a?(q.focus(),q.close()):q.focus()))},0)}function h(a){return a.replace(/&/gm,"&amp;").replace(/\n/gm,"&#10;").replace(/\r/gm,"&#13;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/'/gm,"&apos;")}var i=function(){alert("A file download error has occurred, please try again.")},j=b.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:!0},successCallback:function(){},beforeDownloadCallback:!1,failCallback:!1,httpMethod:"GET",data:null,checkInterval:100,cookieName:"__ModManExportDownload",cookieValue:"true",cookiePath:"/",popupWindowTitle:"Initiating file download...",encodeHTMLEntities:!0},d),k=(navigator.userAgent||navigator.vendor||a.opera).toLowerCase(),l=!1,m=!1,n=!1;if(/ip(ad|hone|od)/.test(k)?l=!0:-1!=k.indexOf("android")?m=!0:n=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(k)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(k.substr(0,4)),k=j.httpMethod.toUpperCase(),m&&"GET"!=k)b().dialog?b("<div>").html(j.androidPostUnsupportedMessageHtml).dialog(j.dialogOptions):alert(j.androidPostUnsupportedMessageHtml);else{j.beforeDownloadCallback&&j.beforeDownloadCallback();var o={onSuccess:function(a){j.successCallback(a)},onFail:function(a,c){j.failMessageHtml?(b("<div>").html(j.failMessageHtml).dialog(j.dialogOptions),j.failCallback&&j.failCallback!=i&&j.failCallback(a,c)):j.failCallback&&j.failCallback(a,c)}};null!==j.data&&"string"!=typeof j.data&&(j.data=b.param(j.data));var p,q,r;if("GET"===k)null!==j.data&&(-1!=c.indexOf("?")?"&"!==c.substring(c.length-1)&&(c+="&"):c+="?",c+=j.data),l||m?(q=a.open(c),q.document.title=j.popupWindowTitle,a.focus()):n?a.location(c):p=b("<iframe>").hide().attr("src",c).appendTo("body");else{var s="";null!==j.data&&b.each(j.data.replace(/\+/g," ").split("&"),function(){var a=this.split("="),b=j.encodeHTMLEntities?h(decodeURIComponent(a[0])):decodeURIComponent(a[0]);if(b){var c=a[1]||"",c=j.encodeHTMLEntities?h(decodeURIComponent(a[1])):decodeURIComponent(a[1]);s+='<input type="hidden" name="'+b+'" value="'+c+'" />'}}),n?(r=b("<form>").appendTo("body"),r.hide().attr("method",j.httpMethod).attr("action",c).html(s)):(l?(q=a.open("about:blank"),q.document.title=j.popupWindowTitle,n=q.document,a.focus()):(p=b("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body"),n=f(p)),n.write("<html><head></head><body><form method='"+j.httpMethod+"' action='"+c+"'>"+s+"</form>"+j.popupWindowTitle+"</body></html>"),r=b(n).find("form")),r.submit()}setTimeout(e,j.checkInterval)}}});var f={each:function(a,b,c){var d,e;if(!a)return 0;if(c=c||a,void 0!==a.length){for(d=0,e=a.length;d<e;d++)if(!1===b.call(c,a[d],d,a))return 0}else for(d in a)if(a.hasOwnProperty(d)&&!1===b.call(c,a[d],d,a))return 0;return 1},getHash:function(a){var b,a=f.get(a);return a&&f.each(a.split("&"),function(a){a=a.split("="),b=b||{},b[a[0]]=a[1]}),b},setHash:function(a,b,c,d,e,g){var h="";f.each(b,function(a,b){h+=(h?"&":"")+b+"="+a}),f.set(a,h,c,d,e,g)},get:function(a){var d,b=document.cookie,c=a+"=";if(b){if(-1==(d=b.indexOf("; "+c))){if(0!=(d=b.indexOf(c)))return null}else d+=2;return a=b.indexOf(";",d),-1==a&&(a=b.length),decodeURIComponent(b.substring(d+c.length,a))}},set:function(a,b,c,d,e,f){var g=new Date;"object"==typeof c&&c.toGMTString?c=c.toGMTString():parseInt(c,10)?(g.setTime(g.getTime()+1e3*parseInt(c,10)),c=g.toGMTString()):c="",document.cookie=a+"="+encodeURIComponent(b)+(c?"; expires="+c:"")+(d?"; path="+d:"")+(e?"; domain="+e:"")+(f?"; secure":"")},remove:function(a,b){f.set(a,"",-1e3,b)}},g={Popups:{pointer:function(a,c){if(a&&a.length){c||(c={});var d,c=b.extend({class:!1,message:"",callback:!1,position:{edge:"left",align:"center",offset:"15 0"}},c);return a.pointer({content:c.message,position:c.position,close:function(a,c){return function(){c.callback&&b.isFunction(c.callback)&&c.callback.call(a)}}(a,c),open:function(a,b){b.pointer.hide().fadeIn("fast")}}),d=a.pointer("widget"),c.class&&d.addClass(c.class),a.pointer("open"),a}}},needsSave:!1,ajaxurl:c.Settings.ajaxurl,sidebars:null,the_id:"",rem:"",win:b(a),init:function(){var a=isRtl?"marginRight":"marginLeft";if(b("#modman-needs-save").hide(),g.sidebars=b("div.modules-sortables"),b("#modules-right").on("click",".sidebar-name",function(){var a=b(this).siblings(".modules-sortables"),c=b(this).parent();c.hasClass("closed")?(c.removeClass("closed"),a.sortable("enable").sortable("refresh")):(a.sortable("disable"),c.addClass("closed"))}),b("#modules-left").children(".modules-holder-wrap").children(".sidebar-name").click(function(){b(this).parent().toggleClass("closed")}),b(".wrap").on("click","a.sidebar-name-arrow",function(){var a=b(this);a.hasClass("modman-open-details")?(a.removeClass("modman-open-details"),a.parents(".module").find(".module-description").slideFadeUp("fast")):(a.addClass("modman-open-details"),a.parents(".module").find(".module-description").slideFadeDown("fast"))}),b("#modules-right").on("click",".modulemanager-description a.sidebar-name-arrow",function(){var a=b(this).closest(".modulemanager-description").find(".module-info-description");a.hasClass("modman-closed")?(a.removeClass("modman-closed"),a.slideFadeDown("fast")):(a.addClass("modman-closed"),a.slideFadeUp("fast"))}),g.sidebars.each(function(){if(b(this).parent().hasClass("inactive"))return!0;var a=50,c=b(this).children(".module").length;a+=parseInt(48*c,10),b(this).css("minHeight",a+"px")}),b("body").on("click"," a.module-action",function(){var c={},d=b(this).closest("div.module"),e=d.children(".module-inside"),f=parseInt(d.find("input.module-width").val(),10);return e.is(":hidden")?(f>250&&e.closest("div.modules-sortables").length&&(c.width=f+30+"px",e.closest("div.modules-liquid-right").length&&(c[a]=235-f+"px"),d.css(c)),g.fixLabels(d),e.slideFadeDown("fast")):e.slideFadeUp("fast",function(){d.css({width:"",margin:""})}),!1}),b("body").on("click","a.module-control-close",function(){return g.close(b(this).closest("div.module")),!1}),b("body").on("click","a.module-remove",function(){return confirm(c.Locale.onModuleRemove)&&b(this).closest(".modules-holder-wrap").fadeOut("fast",function(){b(this).remove(),g.needsSave=!0,b("#modman-needs-save").show(),g.refresh()}),!1}),b("#modules-right").on("change",".module-info-description",function(){g.needsSave=!0,b("#modman-needs-save").show()}),b("body").on("click","a.module-export",function(){return g.exportm(b(this)),!1}),b("body").on("click",".item-not-available .icon-question-sign",function(a){return a.preventDefault(),a=b(this),a[0].__pointer?(a[0].__pointer.pointer("close"),!1):(a[0].__pointer=g.Popups.pointer(a,{message:c.Locale.itemNotAvailableTip,position:{edge:"right",align:"center",offset:"-15 0"},callback:function(){b(this)[0].__pointer=null}}),!1)}),g.sidebars.children(".module").each(function(){g.appendTitle(this),b("p.module-error",this).length&&b("a.module-action",this).click()}),b("#module-list").find(".module:not(.non-draggable)").draggable({connectToSortable:"div.modules-sortables",handle:"> .module-top > .module-title",distance:2,helper:"clone",zIndex:5,containment:"document",start:function(a,b){b.helper.find("div.module-description").hide(),g.the_id=this.id},drag:function(a,b){var c=g.win.scrollTop(),d=g.win.scrollLeft(),e=g.win.height(),f=g.win.width();e+=c;var f=d+f,h=0,i=0,j=!1;b.offset.top>e-100?(i=.1*(e-b.offset.top),j=!0):b.offset.top<c+100&&(i=.1*(c-b.offset.top),j=!0),b.offset.left>f-100?(h=.1*(f-b.offset.left),j=!0):b.offset.left<d+100&&(h=.1*(d-b.offset.left),j=!0),j&&g.win[0].scrollBy(h,i)},stop:function(){g.rem&&b(g.rem).hide(),jQuery(".module.ui-draggable").css("height",""),g.rem=""}}),g.sidebars.sortable({placeholder:"module-placeholder",items:"> .module",handle:"> .module-top > .module-title",cursor:"move",distance:2,containment:"document",start:function(a,b){b.item.children(".module-inside").hide(),b.item.css({margin:"",width:""})},stop:function(a,c){if(c.item.hasClass("ui-draggable")&&c.item.data("draggable")&&c.item.draggable("destroy"),c.item.hasClass("deleting"))c.item.remove(),g.resize(),g.needsSave=!0,b("#modman-needs-save").show();else{var d=b(this).closest(".modules-holder-wrap");d[0].__pointer&&d[0].__pointer.pointer("close");var e=b(c.item);if(b(this).find(".module").not(e).filter(function(){return b(this).find(".module-data .module-item").text()==e.find(".module-data .module-item").text()}).length)c.item.remove();else{var d=parseInt(b("input#__module_cnt__").val(),10)+1,f=g.the_id;b(this).attr("id"),b("input#__module_cnt__").val(d+""),c.item.css({margin:"",width:""}),g.the_id="",g.needsSave=!0,b("#modman-needs-save").show(),c.item.attr("id",f.replace("__cnt__",d)),c.item.find("a.module-action").click()}}},receive:function(a,c){var d=b(c.sender);(!b(this).is(":visible")||-1!=this.id.indexOf("orphaned_modules"))&&d.sortable("cancel"),-1!=d.attr("id").indexOf("orphaned_modules")&&!d.children(".module").length&&d.parents(".orphan-sidebar").slideUp(400,function(){b(this).remove()})}}).sortable("option","connectWith","div.modules-sortables").parent().filter(".closed").children(".modules-sortables").sortable("disable"),b("#available-modules").droppable({tolerance:"pointer",accept:function(a){return!b(a).parents("#module-list").length},drop:function(a,b){b.draggable.addClass("deleting")},over:function(a,c){c.draggable.addClass("deleting"),b("div.module-placeholder").hide()},out:function(a,c){c.draggable.removeClass("deleting"),b("div.module-placeholder").show()}}),1==d("module-manager","empty_pointer_tip",1)&&0==b("#modules-right .modules-holder-wrap").length){var f=b(".button.modman-add-module");jQuery(".button.modman-add-module").length>0&&(f[0].__pointer=g.Popups.pointer(f,{message:c.Locale.addNewModuleTip,position:{edge:"right",align:"center",offset:"-15 0"},callback:function(){b(this)[0].__pointer=null,e("module-manager","empty_pointer_tip",0)}}))}},save:function(){var a={modules:{}};0==b("#modules-right .modules-holder-wrap").length?a.modules=[0]:b("#modules-right .modules-holder-wrap").each(function(){var d=b(this).find(".sidebar-name h3").clone().children().remove().end().text(),d=b.trim(d);a.modules[d]={};var e=b(this).find(".module-info-description").val();e||(e=""),a.modules[d][c.Settings.moduleInfoKey]={},a.modules[d][c.Settings.moduleInfoKey].description=e,0==b(this).find(".modules-sortables .module").length?a.modules[d]=[0]:b(this).find(".modules-sortables .module").each(function(){var c=b(this).find(".module-data .module-plugin").text(),e=b(this).find(".module-data .module-item").text(),f=b(this).find(".module-description").html();f||(f="");var g=b(this).find(".module-title h4").clone().children().remove().end().text(),g=b.trim(g);a.modules[d][c]||(a.modules[d][c]=[]),a.modules[d][c].push({id:e,title:g,details:f})})}),a=b.param(a)+"&modman-save-modules-field="+b("#modman-save-modules-field").val(),b(".ajax-feedback").css("visibility","visible"),b.post(g.ajaxurl,a,function(){b(".ajax-feedback").css("visibility","hidden"),g.needsSave=!1,b("#modman-needs-save").hide()})},appendTitle:function(a){var c=b('input[id*="-title"]',a).val()||"";c&&(c=": "+c.replace(/<[^<>]+>/g,"").replace(/</g,"&lt;").replace(/>/g,"&gt;")),b(a).children(".module-top").children(".module-title").children().children(".in-module-title").html(c)},resize:function(){b("div.modules-sortables").each(function(){if(b(this).parent().hasClass("inactive"))return!0;var a=50,c=b(this).children(".module").length;a+=parseInt(48*c,10),b(this).css("minHeight",a+"px")})},fixLabels:function(a){a.children(".module-inside").find("label").each(function(){var a=b(this).attr("for");a&&a==b("input",this).attr("id")&&b(this).removeAttr("for")})},close:function(a){a.children(".module-inside").slideUp("fast",function(){a.css({width:"",margin:""})})},refresh:function(){g.sidebars=b("div.modules-sortables"),g.sidebars.each(function(){if(b(this).parent().hasClass("inactive"))return!0;var a=50,c=b(this).children(".module").length;a+=parseInt(48*c,10),b(this).css("minHeight",a+"px")}),g.sidebars.sortable("refresh")},addNew:function(){var a=prompt(c.Locale.newModuleName,"New Module"),f=!1,h=0;if(!a)return!1;for(;!f;){var i=jQuery("div.modules-holder-wrap .sidebar-name h3");if(jQuery(i).each(function(b,c){var d=jQuery(c).text(),e=a;d=d.toLowerCase(),e=e.toLowerCase(),d===e&&h++}),h>0){if(a=prompt(c.Locale.duplicatenewModuleName,"New Module"),h=0,!a)return!1}else if(0==/^[a-zA-Z0-9- ]*$/.test(a)){if(a=prompt(c.Locale.illegalwModuleName,"New Module"),h=0,!a)return!1}else 0===h&&(f=!0)}var j=a.replace(/\s+/g,"_"),k=b("#module-template").html(),k=b(k.replace("%%__MOD_NAME__%%",a).replace("%%__MOD_ID__%%",j));k.appendTo(b("#modules-right")),a=b(".button.modman-add-module"),a[0].__pointer&&a[0].__pointer.pointer("close"),k.find(".modules-sortables").sortable({placeholder:"module-placeholder",items:"> .module",handle:"> .module-top > .module-title",cursor:"move",distance:2,containment:"document",start:function(a,b){b.item.children(".module-inside").hide(),b.item.css({margin:"",width:""})},stop:function(a,c){if(c.item.hasClass("ui-draggable")&&c.item.data("draggable")&&c.item.draggable("destroy"),c.item.hasClass("deleting"))c.item.remove();else{var d=b(this).closest(".modules-holder-wrap");d[0].__pointer&&d[0].__pointer.pointer("close");var e=b(c.item);if(b(this).find(".module").not(e).filter(function(){return b(this).find(".module-data .module-item").text()==e.find(".module-data .module-item").text()}).length)c.item.remove();else{var d=c.item.find("input.add_new").val(),f=c.item.find("input.multi_number").val(),h=g.the_id;b(this).attr("id"),c.item.css({margin:"",width:""}),g.the_id="",d&&("multi"==d?(c.item.html(c.item.html().replace(/<[^<>]+>/g,function(a){return a.replace(/__i__|%i%/g,f)})),c.item.attr("id",h.replace("__i__",f)),f++,b("div#"+h).find("input.multi_number").val(f)):"single"==d&&(c.item.attr("id","new-"+h),rem="div#"+h),c.item.find("input.add_new").val(""),c.item.find("a.module-action").click())}}},receive:function(a,c){var d=b(c.sender);(!b(this).is(":visible")||-1!=this.id.indexOf("orphaned_modules"))&&d.sortable("cancel"),-1!=d.attr("id").indexOf("orphaned_modules")&&!d.children(".module").length&&d.parents(".orphan-sidebar").slideUp(400,function(){b(this).remove()})}}).sortable("option","connectWith","div.modules-sortables").parent().filter(".closed").children(".modules-sortables").sortable("disable"),g.needsSave=!0,1==d("module-manager","add_pointer_tip",1)&&(k[0].__pointer=g.Popups.pointer(k,{message:c.Locale.addElementsTip,position:{edge:"right",align:"center",offset:"-15 0"},callback:function(){b(this)[0].__pointer=null,e("module-manager","add_pointer_tip",0)}})),b("#modman-needs-save").show();var l="#"+j;jQuery(l).next(".module-controls").children(".module-remove").after('<a id="'+j+'" class="button-primary module-elements-add-all" href="javascript:;">'+ModuleManagerConfig.Locale.addAllItemsText+"</a>"),jQuery("#modules-right "+l).droppable({drop:function(a,b){jQuery(l).next(".module-controls").children(".module-elements-add-all").remove()}}),g.refresh()},filter:function(a){var c=b("#available-modules .module");""==b.trim(a)?c.show():(c.hide(),c.filter(function(){return b.trim(b(this).find(".module-title h4").text().toLowerCase()).indexOf(a.toLowerCase())>-1}).show())},moduleData:function(a){return data={module:{name:"",module:{}}},$module=b(a),a=$module.find(".sidebar-name h3").clone().children().remove().end().text(),a=b.trim(a),data.module.name=a,data.module.module={},(a=$module.find(".module-info-description").val())||(a=""),data.module.module[c.Settings.moduleInfoKey]={},data.module.module[c.Settings.moduleInfoKey].description=a,0!=$module.find(".modules-sortables .module").length&&($module.find(".modules-sortables .module").each(function(){var a=b(this).find(".module-data .module-plugin").text(),c=b(this).find(".module-data .module-item").text(),d=b(this).find(".module-description").html(),e=b(this).find(".module-title h4").clone().children().remove().end().text(),e=b.trim(e);d||(d=""),data.module.module[a]||(data.module.module[a]=[]),data.module.module[a].push({id:c,title:e,details:d})}),b.param(data))},exportm:function(a){return a=g.moduleData(a.closest(".modules-holder-wrap")),!1!==a?(b(".ajax-feedback").css("visibility","visible"),b.ModManfileDownload(c.Settings.exportModuleRoute,{data:a,httpMethod:"POST",successCallback:function(){b(".ajax-feedback").css("visibility","hidden")},failCallback:function(){b(".ajax-feedback").css("visibility","hidden"),alert(c.Locale.exportErrorMsg)}})):alert(c.Locale.moduleEmptyMsg),!1}};a.onbeforeunload=function(b){b||(b=a.event),g.needsSave&&(b.cancelBubble=!0,b.returnValue=c.Locale.onPageExit,b.stopPropagation&&(b.stopPropagation(),b.preventDefault()))},b(function(){g.init()}),a.ModuleManager=g}(window,jQuery,ModuleManagerConfig),jQuery(document).ready(function(a){function b(a){a=a.split("+").join(" ");for(var c,b={},d=/[?&]?([^=]+)=([^&]*)/g;c=d.exec(a);)b[decodeURIComponent(c[1])]=decodeURIComponent(c[2]);return b}function d(b){var c=b.tab;"import"==c?(a("#toplevel_page_ModuleManager_Modules li.current").removeClass("current"),a("#toplevel_page_ModuleManager_Modules .modman_nav_import").addClass("current")):"library"==c&&(a("#toplevel_page_ModuleManager_Modules li.current").removeClass("current"),a("#toplevel_page_ModuleManager_Modules .modman_nav_library").addClass("current"))}a("#toplevel_page_ModuleManager_Modules li a").each(function(){var b=a(this).attr("href");b.length>0&&("admin.php?page=ModuleManager_Modules"==b?a(this).parent("li").addClass("modman_nav_main"):"admin.php?page=ModuleManager_Modules&tab=import"==b?a(this).parent("li").addClass("modman_nav_import"):"admin.php?page=ModuleManager_Modules&tab=library"==b&&a(this).parent("li").addClass("modman_nav_library"))}),d(b(document.location.search)),a('form[name="modman-import-form"] #modman-import').attr("disabled","disabled"),a('form[name="modman-import-form"] input:file').change(function(){a('form[name="modman-import-form"] #modman-import').removeAttr("disabled")}),a("#modules-right .modules-sortables").each(function(b,c){var d=this.id;d=d.replace(/([ #;?%&,.+*~\':"!^$[\]()=>|\/@])/g,"\\$1"),a(".modules-holder-wrap #"+d).is(":empty")&&a("#"+d).next(".module-controls").children(".module-remove").after('<a id="'+d+'" class="button-primary module-elements-add-all" href="javascript:;">'+ModuleManagerConfig.Locale.addAllItemsText+"</a>")}),a("#modules-right .modules-sortables").droppable({drop:function(b,c){var d=b.target.id;a("#"+d).next(".module-controls").children(".module-elements-add-all").remove()}}),a(document).on("click",".module-elements-add-all",function(){var b=this.id;a(".modman-module-section .ui-draggable").each(function(c,d){var e=a(this)[0].outerHTML,f=a(e),f=f.removeAttr("id"),f=f.filter(".ui-draggable").css("display","block"),f=f.find(".module-inside").css("display","none").addBack(".ui-draggable"),g=f[0].outerHTML;a("#modules-right #"+b+".modules-sortables").append(g)}),a("#modules-right #"+b+".modules-sortables").find(".module-top").length&&a(".module-controls #"+b).remove()})});
